{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Iniciar Sesión - Grupo EM</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Notyf CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.css">
    <!-- Font Awesome para iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css?family=Exo:400,700');

        * {
            margin: 0px;
            padding: 0px;
        }

        body {
            font-family: 'Exo', sans-serif;
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden; /* Prevenir scrollbars */
        }

        /* CONTENEDOR PRINCIPAL - FONDO MORADO */
        .main-container {
            background: #1f4bc5;
            background: -webkit-linear-gradient(to left, #8f94fb, #4e54c8);
            width: 100%;
            height: 100vh;
            position: relative;
            overflow: hidden;
        }

        .circles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .circles li {
            position: absolute;
            display: block;
            list-style: none;
            width: 20px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            animation: animate 25s linear infinite;
            bottom: -150px;
        }


        @keyframes animate {
            0% {
                transform: translateY(0) rotate(0deg);
                opacity: 1;
                border-radius: 0;
            }
            100% {
                transform: translateY(-1000px) rotate(720deg);
                opacity: 0;
                border-radius: 50%;
            }
        }

        /* POSICIONAR EL FORMULARIO ENCIMA DEL FONDO */
        .login-section {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-custom {
            border-radius: 1rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3); /* Sombra para mejor contraste */
            border: none;
        }

        .img-custom {
            border-radius: 1rem 0 0 1rem;
            height: 100%;
            object-fit: cover;
        }

        /* Asegurar que el contenedor ocupe toda la altura */
        .container.h-100 {
            height: 100% !important;
        }

        /* Logo para pantallas pequeñas */
        .mobile-logo {
            display: none;
            text-align: center;
            margin-bottom: 1.5rem;
            padding-top: 1rem;
        }

        .mobile-logo img {
            max-width: 75%;
            height: auto;
        }

        /* Mostrar logo solo en pantallas pequeñas */
        @media (max-width: 767.98px) {
            .mobile-logo {
                display: block;
            }

            /* Ajustar el padding superior del formulario en móviles */
            .login-section .container {
                padding-top: 1rem;
            }


        }
     

        @media (max-width: 767.98px) {
            .login-section {
                align-items: flex-start;
                padding-top: 1rem;
                transform: translateY(-50px); /* ← Mueve hacia arriba */
            }
            
            .d-flex.align-items-center.mb-3.pb-1 {
        display: none !important;
    }
            
            .card-body h5 {
        font-weight: bold !important;
    }
        }

    </style>
</head>
<body>
<!-- CONTENEDOR PRINCIPAL CON FONDO MORADO -->
<div class="main-container">
    <!-- Animaciones de círculos -->
    <ul class="circles">
    </ul>


    <!-- SECCIÓN DEL LOGIN SOBREPUESTA -->
    <section class="login-section">
        <div class="container py-5 h-100">
            <div class="row d-flex justify-content-center align-items-center h-100">
                <div class="col col-xl-10">
                    <!-- Logo para pantallas pequeñas -->
                    <div class="mobile-logo">
                        <img src="{% static 'img/logo-gupoem.png' %}" alt="Grupo EM Logo">
                    </div>

                    <div class="card card-custom">
                        <div class="row g-0">
                            <!-- Lado izquierdo con imagen -->
                            <div class="col-md-6 col-lg-5 d-none d-md-block">
                                <img src="{% static 'img/imagen-login.png' %}"
                                     alt="login form" class="img-fluid img-custom"/>
                            </div>
                            <!-- Lado derecho con formulario -->
                            <div class="col-md-6 col-lg-7 d-flex align-items-center">
                                <div class="card-body p-4 p-lg-5 text-black">
                                    <div class="d-flex align-items-center mb-3 pb-1">
                                        
                                        <i class="fa-solid fa-headphones fa-2x me-3" style="color: #063f9e;"></i>
                                        <span class="h1 fw-bold mb-0">Grupo EM</span>
                                    </div>

                                    <h5 class="fw-normal mb-3 pb-3" style="letter-spacing: 1px;">Inicia sesión en tu
                                        cuenta</h5>

                                    <form method="POST">
                                        {% csrf_token %}
                                        <!-- Campo de nombre de usuario -->
                                        <div data-mdb-input-init class="form-outline mb-4">
                                            {{ form.username }}
                                            <label class="form-label" for="{{ form.username.id_for_label }}">Nombre de
                                                usuario</label>
                                        </div>
                                        <!-- Campo de contraseña -->
                                        <div data-mdb-input-init class="form-outline mb-4">
                                            {{ form.password }}
                                            <label class="form-label"
                                                   for="{{ form.password.id_for_label }}">Contraseña</label>
                                        </div>

                                        <div class="pt-1 mb-4">
                                            <button id="btnIngresar" type="submit" class="btn btn-dark btn-lg w-100">
                                                <span id="spinner" class="spinner-border spinner-border-sm d-none me-2"
                                                      role="status" aria-hidden="true"></span>
                                                <span id="btnText">Ingresar</span>
                                            </button>
                                        </div>

                                        <a class="small text-muted" href="#!">¿Olvidaste tu contraseña?</a>
                                        <p class="mb-5 pb-lg-2" style="color: #393f81;">
                                            ¿No tienes cuenta? <a href="#!" style="color: #393f81;">Regístrate aquí</a>
                                        </p>
                                        <a href="#" class="small text-muted">Términos de uso.</a>
                                        <a href="#" class="small text-muted">Política de privacidad</a>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>

<!-- Bootstrap 5 JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Notyf JS -->
<script src="https://cdn.jsdelivr.net/npm/notyf@3/notyf.min.js"></script>
<script>
    const notyf = new Notyf({
        duration: 5000,
        position: {x: 'right', y: 'top'},
        dismissible: true
    });

    // Mostrar los mensajes de error de Django usando Notyf
    {% if messages %}
        {% for message in messages %}
            notyf.error("{{ message }}");
        {% endfor %}
    {% endif %}
</script>

<script>
    document.querySelector('form').addEventListener('submit', function () {
        const btn = document.getElementById('btnIngresar');
        const spinner = document.getElementById('spinner');
        const btnText = document.getElementById('btnText');

        // Mostrar spinner y desactivar botón
        spinner.classList.remove('d-none');
        btnText.textContent = 'Ingresando...';
        btn.disabled = true;
    });
</script>

<script>
    // Generar círculos dinámicamente
    document.addEventListener('DOMContentLoaded', function () {
        const circlesContainer = document.querySelector('.circles');
        const numberOfCircles = 15; // Cambia este número para más/menos círculos

        for (let i = 1; i <= numberOfCircles; i++) {
            const circle = document.createElement('li');

            // Valores aleatorios para variedad
            const size = Math.random() * 120 + 20; // 10px a 110px
            const left = Math.random() * 100; // 0% a 100%
            const delay = Math.random() * 10; // 0s a 10s
            const duration = Math.random() * 30 + 15; // 15s a 45s

            circle.style.cssText = `
            left: ${left}%;
            width: ${size}px;
            height: ${size}px;
            animation-delay: ${delay}s;
            animation-duration: ${duration}s;
        `;

            circlesContainer.appendChild(circle);
        }
    });
</script>


</body>
</html>